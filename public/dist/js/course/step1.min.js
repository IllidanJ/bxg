define(["jquery","template","tools","ckeditor"],function(e,t,c){var a=c.getId();a&&(e.ajax({url:"/api/course/basic",type:"get",data:{cs_id:a},success:function(c){if(200==c.code){e(".body").html(t("step1",c.result)),CKEDITOR.replace("ckeditor",{toolbarGroups:[{name:"clipboard",groups:["clipboard","undo"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},"/",{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"styles"},{name:"colors"}]}),e("#top").val(c.result.cs_cg_pid),e("#teacher").val(c.result.cs_tc_id);var a=c;e.ajax({type:"get",url:"/api/category/child",data:{cg_id:c.result.cs_cg_id},success:function(t){if(200==t.code){for(var c=0;c<t.result.length;c++)e("#child").append("<option value="+t.result[c].cg_id+">"+t.result[c].cg_name+"</option>");e("#child").val(a.result.cs_cg_id)}}})}},complete:function(){e("#top").change(function(){e.ajax({type:"get",url:"/api/category/child",data:{cg_id:e(this).val()},success:function(t){if(!t)return e("#child").html('<option value="-1">请选择</option>'),!1;if(200==t.code){e("#child").html('<option value="-1">请选择</option>');for(var c=0;c<t.result.length;c++)e("#child").append("<option value="+t.result[c].cg_id+">"+t.result[c].cg_name+"</option>")}}})})}}),e(".body").on("click",".baocun",function(){for(instance in CKEDITOR.instances)CKEDITOR.instances[instance].updateElement();e.ajax({url:"/api/course/update/basic",type:"post",data:e("form").serialize(),success:function(e){200==e.code&&(alert("保存成功"),location.href="/course/step2?cs_id="+a)}})}))});