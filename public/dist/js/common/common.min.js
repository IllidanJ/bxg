define(["jquery","template","nprogress","jquery_cookie"],function(o,t,e){if("/login"!=location.pathname){o.cookie("PHPSESSID")||(location.href="/login"),o("#logout").on("click",function(){o.ajax({type:"post",url:"/api/logout",success:function(t){200==t.code&&(o.removeCookie("login_info",{path:"/"}),location.href="/login")}})});var i=t("touxiang",JSON.parse(o.cookie("login_info")));o("#login").html(i);var n={"/teacher/add":"/teacher/list","/settings":"/","/repass":"/","/category/add":"/category/add","/course/step1":"/course/add","/course/step2":"/course/add","/course/step3":"/course/add"}[location.pathname]||location.pathname;o(".list-unstyled li").each(function(){o(this).children().attr("href")==n&&o(this).addClass("active").siblings().removeClass("active")}),o(".list-unstyled li:last-child").on("click",function(){o(this).find("ul").slideToggle()}),o(".list-unstyled li:last-child").find("ul").find('li[class="active"]').parent().show(),e.start(),setTimeout(function(){e.done()},500),o(document).ajaxStart(function(){o(".loading").show()}),o(document).ajaxStop(function(){o(".loading").hide()})}});